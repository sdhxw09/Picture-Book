<script type="text/javascript" src="jquery-1.7.1.min.js"></script>

<script>

    chrome.tabs.onSelectionChanged.addListener(function (tabId) {
        var lastTabId = tabId;
        chrome.tabs.get(tabId, function(tab) {
            var tabUrl = tab.url;
            console.log(tabUrl);
            if (tabUrl.indexOf('http://www.engadget.com/') != -1) {
                chrome.pageAction.show(lastTabId);
            }
        });
    });

    chrome.pageAction.onClicked.addListener(function(tab) {
        chrome.tabs.sendRequest(tab.id, {});
    });

    chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
        console.log(request.imageUrl);
    });

</script>
